import{useSassPalettePlugin as O}from"vuepress-plugin-sass-palette";import{Logger as y,getLocales as v}from"vuepress-shared/node";import{colors as d,getDirname as w,path as C}from"@vuepress/utils";import{ensureEndingSlash as j}from"@vuepress/shared";const $={"/en/":{backToTop:"Back to top"},"/zh/":{backToTop:"返回顶部"},"/zh-tw/":{backToTop:"返回頂部"},"/de-at/":{backToTop:"Zurück nach oben."},"/vi/":{backToTop:"Trở lại đầu trang"},"/uk/":{backToTop:"Повернутися до початку"},"/ru/":{backToTop:"Вернуться к началу"},"/br/":{backToTop:"Volta ao topo"},"/pl/":{backToTop:"Wróć na górę"},"/sk/":{backToTop:"Back to top"},"/fr/":{backToTop:"Back to top"},"/es/":{backToTop:"Volver arriba"},"/ja/":{backToTop:"このページのトップへ戻る"},"/tr/":{backToTop:"En başa dön"},"/ko/":{backToTop:"맨 위로"}},f=new y("vuepress-plugin-components"),B=(o="")=>o==="fontawesome"||o.match(/^(?:https:)?\/\/kit\.fontawesome\.com\//)?"fas fa-":o==="iconfont"||o.match(/^(?:https:)?\/\/at\.alicdn\.com\/t\//)?"iconfont icon-":"",r=({options:o,deprecatedOption:e,newOption:i,msg:t="",scope:s=""})=>{if(e in o){if(f.warn(`${d.magenta(e)} is ${d.yellow("deprecated")}${s?` in ${s}`:""}, please use "${d.magenta(i)}" instead.${t?`
${t}`:""}`),i.includes(".")){const a=i.split(".");let n=o;a.forEach((c,T)=>{T!==a.length-1?(n[c]=n[c]||{},n=n[c]):n[c]=o[e]})}else o[i]=o[e];delete o[e]}},P=o=>{r({options:o,deprecatedOption:"iconAssets",newOption:"componentOptions.fontIcon.assets"}),r({options:o,deprecatedOption:"iconPrefix",newOption:"componentOptions.fontIcon.prefix"}),r({options:o,deprecatedOption:"addThis",newOption:"rootComponents.addThis"}),r({options:o,deprecatedOption:"backToTop",newOption:"rootComponents.backToTop"}),r({options:o,deprecatedOption:"notice",newOption:"rootComponents.notice"}),r({options:o,deprecatedOption:"backToTopLocales",newOption:"locales.backToTop"})},S=w(import.meta.url),l=j(C.resolve(S,"../client")),I=["AudioPlayer","Badge","BiliBili","CodePen","FontIcon","PDF","StackBlitz","VideoPlayer","YouTube"],x=o=>{if(!o)return null;if(o==="fontawesome")return{type:"script",content:"https://kit.fontawesome.com/ca37c296c5.js"};if(o==="iconfont")return{type:"style",content:'@import url("//at.alicdn.com/t/font_2410206_a0xb9hku9iu.css");'};const e=o.match(/^(?:https?:)?\/\//g)?o:`//${o}`;return e.endsWith(".css")?{type:"style",content:`@import url("${o}");`}:e.endsWith(".js")?{type:"script",content:o}:(f.error(`Can not recognize icon link: "${o}"`),null)},L=(o,{components:e=[],componentOptions:i={},rootComponents:t={}})=>{let s="",a="",n="",c="",T=!1,m=!1,u=!1;return e.forEach(p=>{var k;if(I.includes(p)&&(s+=`import ${p} from "${l}components/${p}.js";
`,a+=`app.component("${p}", ${p});
`),p==="FontIcon"){const b=x((k=i.fontIcon)==null?void 0:k.assets);if(b){const{type:h,content:g}=b;h==="script"?(m=!0,n+=`useScriptTag(\`${g}\`);
`):(u=!0,n+=`useStyleTag(\`${g}\`, { id: "icon-assets" });
`)}}}),typeof t.addThis=="string"&&(m=!0,n+=`useScriptTag(\`//s7.addthis.com/js/300/addthis_widget.js#pubid=${t.addThis}\`);
`),t.backToTop&&(T=!0,s+=`import BackToTop from "${l}components/BackToTop.js";
`,c+=`() => h(BackToTop, { threshold: ${typeof t.backToTop=="number"?t.backToTop:300} }),
`),typeof t.notice=="object"&&(T=!0,s+=`import Notice from "${l}components/Notice.js";
`,c+=`() => h(Notice, ${JSON.stringify(t.notice)}),
`),o.writeTemp("components/config.js",`import { defineClientConfig } from "@vuepress/client";
${T?`import { h } from "vue";
`:""}
${m?`import { useScriptTag } from "${l}vueuse.js";
`:""}${u?`import { useStyleTag } from "${l}vueuse.js";
`:""}${s}

import "${l}styles/sr-only.scss";

export default defineClientConfig({
  enhance: ({ app }) => {
${a.split(`
`).map(p=>`    ${p}`).join(`
`)}
  },
  setup: () => {
${n.split(`
`).map(p=>`    ${p}`).join(`
`)}
  },
  rootComponents: [
${c.split(`
`).map(p=>`    ${p}`).join(`
`)}
  ],
});
`)},_=(o,e=!1)=>i=>(e&&P(o),i.env.isDebug&&f.info("Options:",o),O(i,{id:"hope"}),{name:"vuepress-plugin-components",define:()=>{var t,s;const{assets:a,prefix:n}=((t=o.componentOptions)==null?void 0:t.fontIcon)||{};return{BACK_TO_TOP_LOCALES:v({app:i,name:"backToTop",default:$,config:(s=o.locales)==null?void 0:s.backToTop}),ICON_PREFIX:typeof n=="string"?n:B(a)}},clientConfigFile:t=>L(t,o)});export{$ as backToTopLocales,_ as componentsPlugin};
//# sourceMappingURL=index.js.map

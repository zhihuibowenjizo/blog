import{useEventListener as o}from"@vueuse/core";import{checkIsMobile as f}from"vuepress-shared/client";import{ref as d,computed as m,unref as u,onMounted as c,isRef as v,watch as b,defineComponent as $,h}from"vue";import"../styles/bili-bili.scss";const g=t=>typeof t=="string"?t:`${t}px`,w=(t,e=0)=>{const a=d(),l=m(()=>g(u(t.width)||"100%")),r=d("auto"),n=p=>{const s=u(t.height),y=u(t.ratio)||16/9;return s?g(s):`${Number(p)/y+u(e)}px`},i=()=>{a.value&&(r.value=n(a.value.clientWidth))};return c(()=>{i(),v(e)&&b(e,()=>i()),o("orientationchange",()=>i()),o("resize",()=>i())}),{el:a,width:l,height:r}};var B=$({name:"BiliBili",props:{bvid:{type:String,required:!0},title:{type:String,default:"A BiliBili video"},page:{type:Number,default:1},width:{type:[String,Number],default:"100%"},height:{type:[String,Number],default:void 0},ratio:{type:Number,default:16/9},time:{type:Number,default:0},lowQuality:Boolean,noDanmaku:Boolean},setup(t){const e=d(!1),a=m(()=>e.value?0:68),l=()=>{e.value=f(navigator.userAgent)||r.value.clientWidth<640},{el:r,width:n,height:i}=w(t,a),p=m(()=>`https://player.bilibili.com/player.html?bvid=${t.bvid}&t=${t.time}&high_quality=${t.lowQuality?0:1}&page=${t.page}&danmaku=${t.noDanmaku?0:1}`);return c(()=>{l(),o("orientationchange",()=>l()),o("resize",()=>l())}),()=>[h("div",{class:"bili-desc"},h("a",{class:"sr-only",href:p.value},t.title)),h("iframe",{ref:r,src:`https://player.bilibili.com/player.html?bvid=${t.bvid}&t=${t.time}&high_quality=${t.lowQuality?0:1}&page=${t.page}&danmaku=${t.noDanmaku?0:1}`,title:t.title,class:"bili-iframe",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; fullscreen; gyroscope; picture-in-picture",style:{width:n.value,height:i.value}})]}});export{B as default};
//# sourceMappingURL=BiliBili.js.map
